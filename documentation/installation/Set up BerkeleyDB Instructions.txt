Set up BerkeleyDB Instructions
------------------------------

Martus Amplifier requires use of Berkeley DB (http://www.sleepycat.com). For development, you can either use the pre-built binaries or build the binaries from the source.

I. Use pre-built binaries

1. Point the appropriate environment variable to the OS-dependent binaries.

Windows:
These are located at martus-amplifier/buildfiles/binaries/win32. You must add this path to your environment's PATH variable for java to find them. For example, if your project is located at C:\eclipse\workspace\, then you need to add C:\eclipse\workspace\martus-amplifier\buildfiles\binaries\win32 to your PATH.

Linux:
These are located at martus-amplifier/buildfiles/binaries/linux. You must add this path to your environment's LD_LIBRARY_PATH variable for java to find them. For example, if your project is located at ~/eclipse/workspace, then you need to add ~/eclipse/workspace/martus-amplifier/buildfiles/binaries/linux to your LD_LIBRARY_PATH.

2. Point the berkeleydb build path variable (see Set up Eclipse Instructions #7) to db.jar. This is located in martus-amplifier/buildfiles/jars.

II. Build the binaries from source

1. Build the binaries.

Windows:
Open src/db-4.1.25.tar.gz in WinZip (or whatever unzipping utility you use). Extract to a location outside your project workspace (e.g., C:\). Follow the instructions in db-4.1.25/docs/index.html for building on Windows. In particular, follow the instructions entitled "Building Berkeley DB with VisualC++" for the core libraries, and also the "Building the Java API" instructions for the db.jar file.

All necessary output files (DLLs, jars, etc.) should be placed in db-4.1.25/build_win32/Release folder if you built Release versions.

Linux:
Extract src/db-4.1.25.tar.gz to a location outside your project workspace. (e.g., /usr/share/). Go to the instructions in db-4.1.25/docs/index.html for building on UNIX/POSIX systems. For the most part these instructions are correct, except that if you want to build the Java APIs (which you do), you must pass the --enable-java parameter to configure:

../dist/configure --enable-java

For more information, see db-4.1.25/docs/ref/build_unix/conf.html#--enable-java.

After building (make), use the "make install" command to create a directory with all the libraries and db.jar in one place. On my installation, everything was placed in /usr/local/BerkeleyDB.4.1/lib/.

2. Now that you've built the binaries, follow the instructions above (I) for setting your environment variables and Eclipse build path variables, except instead of using the binaries in your project workspace, point to the binaries that you've just built.

On Windows, these should be in <BerkeleyDB location>\build_win32\Release.

On Linux, these should be in /usr/local/BerkeleyDB.4.1/lib.
